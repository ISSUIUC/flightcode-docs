<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Flight Software: Controller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Flight Software
   </div>
   <div id="projectbrief">The Illinois Space Society&#39;s Homemade Rocket Firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_controller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Controller Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04abc2bd08ed713ebb8465e0328c28c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04abc2bd08ed713ebb8465e0328c28c8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlTickFunction</b> (<a class="el" href="structpointers.html">pointers</a> *pointer_struct)</td></tr>
<tr class="separator:a04abc2bd08ed713ebb8465e0328c28c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f5fd82eda9a494cc747ae46f1c5a92e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_controller.html#a3f5fd82eda9a494cc747ae46f1c5a92e">ActiveControl_ON</a> ()</td></tr>
<tr class="memdesc:a3f5fd82eda9a494cc747ae46f1c5a92e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether it's safe for flaps to actuate. Does this based on FSM state and a timer within COAST.  <a href="#a3f5fd82eda9a494cc747ae46f1c5a92e">More...</a><br /></td></tr>
<tr class="separator:a3f5fd82eda9a494cc747ae46f1c5a92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa70c4efe901a553744b1e7821bc020e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa70c4efe901a553744b1e7821bc020e8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Controller</b> (struct <a class="el" href="structpointers.html">pointers</a> *pointer_struct, PWMServo *controller_servo)</td></tr>
<tr class="separator:aa70c4efe901a553744b1e7821bc020e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c70626c96003067d84615f5aed6cbef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_controller.html#a2c70626c96003067d84615f5aed6cbef">setLaunchPadElevation</a> ()</td></tr>
<tr class="memdesc:a2c70626c96003067d84615f5aed6cbef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes launchpad elevation through barometer measurement.  <a href="#a2c70626c96003067d84615f5aed6cbef">More...</a><br /></td></tr>
<tr class="separator:a2c70626c96003067d84615f5aed6cbef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a21e011e77565e1acbed6874bda041e24"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21e011e77565e1acbed6874bda041e24"></a>
PWMServo *&#160;</td><td class="memItemRight" valign="bottom"><b>controller_servo_</b></td></tr>
<tr class="separator:a21e011e77565e1acbed6874bda041e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a1d12242493944c13725c0634590fe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a06a1d12242493944c13725c0634590fe"></a>
mutex_t *&#160;</td><td class="memItemRight" valign="bottom"><b>dataMutex_state_</b></td></tr>
<tr class="separator:a06a1d12242493944c13725c0634590fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76298f88c738eb67939723628be45aab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76298f88c738eb67939723628be45aab"></a>
<a class="el" href="structstate_data.html">stateData</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>stateData_</b></td></tr>
<tr class="separator:a76298f88c738eb67939723628be45aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607ff8e002d3c7045ea073a8e759fb0e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a607ff8e002d3c7045ea073a8e759fb0e"></a>
<a class="el" href="classrk4.html">rk4</a>&#160;</td><td class="memItemRight" valign="bottom"><b>rk4_</b></td></tr>
<tr class="separator:a607ff8e002d3c7045ea073a8e759fb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cca580282385c925c09b4ae7b9f79bd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cca580282385c925c09b4ae7b9f79bd"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>kp</b> = 0.00008</td></tr>
<tr class="separator:a4cca580282385c925c09b4ae7b9f79bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89cb17f508711c21f77e1e0530588bf7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89cb17f508711c21f77e1e0530588bf7"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>min_extension</b> = 0</td></tr>
<tr class="separator:a89cb17f508711c21f77e1e0530588bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fd58b81b96a30b3990ee9da0af7f4ac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2fd58b81b96a30b3990ee9da0af7f4ac"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>max_extension</b> = 17.88 / 1000</td></tr>
<tr class="separator:a2fd58b81b96a30b3990ee9da0af7f4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907d798ed3aed11e946348f8e8845a75"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a907d798ed3aed11e946348f8e8845a75"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>dt</b> = .006</td></tr>
<tr class="separator:a907d798ed3aed11e946348f8e8845a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4b99ab7bbf93f6c6af1e664c7448a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed4b99ab7bbf93f6c6af1e664c7448a5"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>prev_u</b> = 0</td></tr>
<tr class="separator:aed4b99ab7bbf93f6c6af1e664c7448a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05958c0c6c01ec1eb4b5dbf6786d7758"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a05958c0c6c01ec1eb4b5dbf6786d7758"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>du_max</b> = 0.01</td></tr>
<tr class="separator:a05958c0c6c01ec1eb4b5dbf6786d7758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ab64e502973037fa072d33daee9c6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32ab64e502973037fa072d33daee9c6f"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>launch_pad_alt</b></td></tr>
<tr class="separator:a32ab64e502973037fa072d33daee9c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c7504cd751f33b1c8890830ac35a3ac"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c7504cd751f33b1c8890830ac35a3ac"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>apogee_des_msl</b></td></tr>
<tr class="separator:a9c7504cd751f33b1c8890830ac35a3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf6d85aaa71919da59221939b07a3cea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf6d85aaa71919da59221939b07a3cea"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>apogee_des_agl</b> = 9144</td></tr>
<tr class="separator:adf6d85aaa71919da59221939b07a3cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70cc12b5c0bd33a8258f7b47b6d1c5e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70cc12b5c0bd33a8258f7b47b6d1c5e1"></a>
float *&#160;</td><td class="memItemRight" valign="bottom"><b>b_alt</b></td></tr>
<tr class="separator:a70cc12b5c0bd33a8258f7b47b6d1c5e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14dc948a068f1df09fee17647346e412"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14dc948a068f1df09fee17647346e412"></a>
mutex_t *&#160;</td><td class="memItemRight" valign="bottom"><b>dataMutex_barometer_</b></td></tr>
<tr class="separator:a14dc948a068f1df09fee17647346e412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad93a1abecf85890e445e2b03e7569fee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad93a1abecf85890e445e2b03e7569fee"></a>
FSM_State *&#160;</td><td class="memItemRight" valign="bottom"><b>current_state</b></td></tr>
<tr class="separator:ad93a1abecf85890e445e2b03e7569fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3233f0e07453ebd35089c0d0ba8e2d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a3233f0e07453ebd35089c0d0ba8e2d"></a>
ServoControl&#160;</td><td class="memItemRight" valign="bottom"><b>activeControlServos</b></td></tr>
<tr class="separator:a6a3233f0e07453ebd35089c0d0ba8e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed92cd1ce15225576bd91a06bff7398c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed92cd1ce15225576bd91a06bff7398c"></a>
uint32_t *&#160;</td><td class="memItemRight" valign="bottom"><b>ac_coast_timer</b></td></tr>
<tr class="separator:aed92cd1ce15225576bd91a06bff7398c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3f5fd82eda9a494cc747ae46f1c5a92e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Controller::ActiveControl_ON </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether it's safe for flaps to actuate. Does this based on FSM state and a timer within COAST. </p>
<dl class="section return"><dt>Returns</dt><dd>boolean depending on whether flaps should actuate or not </dd></dl>

</div>
</div>
<a class="anchor" id="a2c70626c96003067d84615f5aed6cbef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Controller::setLaunchPadElevation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes launchpad elevation through barometer measurement. </p>
<p>This method takes a series of barometer measurements on start up and takes the average of them in order to initialize the target altitude to a set value above ground level. Hard coding a launch pad elevation is not a viable solution to this problem as the Kalman filter which is the data input to the controller uses barometric altitude as its reference frame. This is equivalent to determining the barometric pressure at an airport and using it to calibrate an aircraft's onboard altimeter.</p>
<p>The function takes an average of 30 measurements, each made 100 ms apart </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>flight/mcu/lib/teensyShared/<a class="el" href="_active_control_8h_source.html">ActiveControl.h</a></li>
<li>flight/mcu/lib/teensyShared/<a class="el" href="_active_control_8cpp.html">ActiveControl.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
